# SmartLinkDrive 快速开始指南

本文档提供快速启动SmartLinkDrive开发环境的步骤。

## 前置条件

- Go 1.21+
- Docker & Docker Compose
- 8GB+ 内存（推荐16GB）

## 快速启动步骤

### 1. 克隆项目

```bash
cd F:\code\golang\src\github.com\SmartLinkDrive
```

### 2. 安装依赖

```bash
go mod download
```

### 3. 启动基础设施服务

```bash
cd deployments
docker-compose up -d
```

等待所有服务启动完成（约1-2分钟），可以使用以下命令检查状态：

```bash
docker-compose ps
```

### 4. 验证基础设施服务

**检查Consul UI:**
- 浏览器打开: http://localhost:8500

**检查其他服务:**
- Prometheus: http://localhost:9090
- Grafana: http://localhost:3000 (admin/admin)
- Jaeger: http://localhost:16686
- Kibana: http://localhost:5601

### 5. 初始化数据库

**MySQL:**
```bash
docker exec -it smartlinkdrive-mysql mysql -uroot -proot -e "CREATE DATABASE IF NOT EXISTS smartlinkdrive CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
```

**ClickHouse:**
```bash
docker exec -it smartlinkdrive-clickhouse clickhouse-client --query "CREATE DATABASE IF NOT EXISTS smartlinkdrive;"
```

### 6. 运行微服务

**启动用户服务（终端1）:**
```bash
cd ..
go run cmd/user-service/main.go -config configs/user-service.json
```

**启动车辆服务（终端2）:**
```bash
go run cmd/vehicle-service/main.go -config configs/vehicle-service.json
```

### 7. 验证服务运行

**检查服务注册:**
- 访问Consul UI: http://localhost:8500/ui/dc1/services
- 应该看到 `user-service` 和 `vehicle-service`

**测试gRPC服务:**
```bash
# 如果没有安装grpcurl，先安装: go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest
grpcurl -plaintext localhost:50051 list
grpcurl -plaintext -d '{"service":"user-service"}' localhost:50051 grpc.health.v1.Health/Check
```

## 常见问题

### 端口被占用

如果遇到端口冲突，可以修改 `deployments/docker-compose.yml` 中的端口映射。

### Docker服务启动失败

```bash
# 查看日志
docker-compose logs -f [service-name]

# 重启服务
docker-compose restart [service-name]
```

### 服务无法连接数据库

确保数据库服务已启动：
```bash
docker-compose ps | grep mysql
docker-compose ps | grep redis
```

## 下一步

- 阅读 [开发环境文档](./开发环境文档.md) 了解详细配置
- 阅读 [部署文档](./部署文档.md) 了解生产部署
- 查看 [项目规划文档](../项目规划文档.md) 了解整体架构

## 停止服务

```bash
# 停止所有Docker服务
cd deployments
docker-compose down

# 停止微服务
# 在运行微服务的终端按 Ctrl+C
```

---

*文档版本: v1.0*
